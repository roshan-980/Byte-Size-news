// inside backend/server.js
const path = require("path");
const express = require("express");
const app = express();
// const express = require('express');
const fs = require("fs");

const dotenv = require("dotenv");

dotenv.config({ path: path.resolve(__dirname, "../.env") }); 

console.log("âœ… NEWS API Key:", process.env.NEWS_API_KEY); 
console.log("âœ… .env exists?", fs.existsSync('./.env'));

 // ðŸ‘ˆ Load the .env file

app.use(express.json());

// âœ… Serve frontend from ../public
app.use(express.static(path.join(__dirname, "../public")));

console.log("âœ… Loaded GNEWS API Key:", process.env.NEWS_API_KEY);
console.log("ðŸ”‘ COHERE_API_KEY:", process.env.COHERE_API_KEY);


// âœ… API routes
const newsRoutes = require("./routes/News");
app.use("/api/news", newsRoutes);






// âœ… For any unknown route, return index.html
app.get("/*splat", (req, res) => {
  res.sendFile(path.join(__dirname, "../public/index.html"));
});

// âœ… Start server
const PORT = process.env.PORT || 5000;
app.listen(PORT, () => console.log(`âœ… Server running at http://localhost:${PORT}`));
